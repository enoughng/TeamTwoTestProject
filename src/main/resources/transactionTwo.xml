<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">


<import resource="applicationContext.xml"/>
<bean id="transactionManager"
	class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
	p:dataSource-ref="dataSource"/>

<bean id="itemDAO" class="yeong.spring.store.dao.jdbc.JdbcItemDAO">
	<constructor-arg><ref bean="template"/></constructor-arg>
</bean>

<bean id="paymentInfoDAO" class="yeong.spring.store.dao.jdbc.JdbcPaymentInfoDAO">
	<constructor-arg><ref bean="simpleJdbcInsert"/></constructor-arg>
	<property name="namedJdbcTemplate" ref="template"></property>
</bean>

<bean id="purchaseOrderDAO" class="yeong.spring.store.dao.jdbc.JdbcPurchaseOrderDAO">
	<constructor-arg><ref bean="simpleJdbcInsert"/></constructor-arg>
	<property name="template" ref="template"></property>
</bean>

<bean id="transactionTemplate"
	class="org.springframework.transaction.support.TransactionTemplate"
	p:transactionManager-ref="transactionManager"/>
	
<bean id="placeOrderService" class="yeong.spring.store.service.PlaceOrderServiceImplTwo"
	p:itemDAO-ref="itemDAO" p:paymentInfoDAO-ref="paymentInfoDAO" p:purchaseOrderDAO-ref="purchaseOrderDAO"
	p:transactionTemplate-ref="transactionTemplate"/>

</beans>
